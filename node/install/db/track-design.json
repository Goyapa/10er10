[{"_id":"_design/references","language":"javascript","views":{"songs":{"map":"function(doc) {\n  if ( doc._id.substr(0,2) == \"pt\" && doc.song) {\n    emit(doc.song,null);\n  }\n}"}}},{"_id":"_design/tracking","updates":{"play":"function(doc,req) {\nif (!doc) {\n  if (req.id) { doc = {_id:req.id}; } \n  else { return [null, 'Empty World:1']; }\n}\nif ( !req.query.song ) { return [null, 'Empty World:2'];} \nif ( !doc.songs ) { doc.songs = [];}\nvar d = new Date();\ndoc.songs.push({date: d.getTime(), song: req.query.song});\nreturn [doc, 'Full world'];\n}","ping":"function(doc,req) {\nif (!doc) {\n  if (req.id) { doc = {_id:req.id}; } \n  else { return [null, 'Empty World']; }\n}\nif ( !doc.ping ) { doc.ping = [];}\nvar d = new Date();\ndoc.ping.push(d.getTime());\nreturn [doc, 'Full world'];\n}"},"views":{"playerTracking":{"map":"function(doc) {\n if ( doc._id.substr(0,2) == \"pt\" ) {\n  if( doc.play && doc.play.time ) {\n   var d = new Date();\n   d.setTime(doc.play.time*1000);\n   var m = d.getMonth()+1;\n   if ( m < 10 ) { m = \"0\"+ m; }\n   var day = d.getDate();\n   if ( day < 10 ) { day = \"0\"+ day; }\n   var h = d.getHours();\n   if( h < 10 ) { h = \"0\"+h ;}\n   emit(parseInt(\"\"+d.getFullYear()+m+day+h),null);\n  }\n }\n}"},"dateTracking":{"map":"function(doc) {\n if ( doc._id.substr(0,2) == \"pt\" ) {\n  if( doc.play && doc.play.time && doc.xp && doc.xp == \"clean\" && doc.song ) {\n   var d = new Date();\n   d.setTime(doc.play.time*1000);\n   var m = d.getMonth()+1;\n//   if ( m < 10 ) { m = \"0\"+ m; }\n   var day = d.getDate();\n//   if ( day < 10 ) { day = \"0\"+ day; }\n   var h = d.getHours();\n//   if( h < 10 ) { h = \"0\"+h ;}\n   emit([d.getFullYear(),m,day,h],doc.song);\n  }\n }\n}","reduce":"_count"},"userDateTracking":{"map":"function(doc) {\n if ( doc._id.substr(0,2) == \"pt\" ) {\n  if( doc.play && doc.play.time && doc.xp && doc.xp == \"clean\" && doc.song ) {\n   var d = new Date();\n   d.setTime(doc.play.time*1000);\n   var m = d.getMonth()+1;\n//   if ( m < 10 ) { m = \"0\"+ m; }\n   var day = d.getDate();\n//   if ( day < 10 ) { day = \"0\"+ day; }\n   var h = d.getHours();\n//   if( h < 10 ) { h = \"0\"+h ;}\n   emit([doc.user,d.getFullYear(),m,day,h],doc.song);\n  }\n }\n}","reduce":"_count"},"songTracking":{"map":"function(doc) {\n if ( doc._id.substr(0,2) == \"pt\" ) {\n  if( doc.play && doc.play.time && doc.xp && doc.xp == \"clean\" && doc.song ) {\n   var d = new Date();\n   d.setTime(doc.play.time*1000);\n   var m = d.getMonth()+1;\n//   if ( m < 10 ) { m = \"0\"+ m; }\n   var day = d.getDate();\n//   if ( day < 10 ) { day = \"0\"+ day; }\n   var h = d.getHours();\n//   if( h < 10 ) { h = \"0\"+h ;}\n   emit([doc.song,d.getFullYear(),m,day,h],doc.song);\n  }\n }\n}","reduce":"_count"}},"language":"javascript"}]